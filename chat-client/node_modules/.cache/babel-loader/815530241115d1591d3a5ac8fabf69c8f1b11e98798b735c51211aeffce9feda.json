{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ElMessage } from \"element-plus\";\nexport default {\n  name: \"LoginComponent\",\n  data() {\n    return {\n      form: {\n        username: \"\"\n      }\n    };\n  },\n  mounted() {},\n  methods: {\n    onSubmit() {\n      if (!this.form.username) {\n        ElMessage.error(\"Please enter your username\");\n        return;\n      } // now send by socket request instead of socket\n      // check if \n      // send the event of \"login\": emit\n      if (!this.$socket.connected) {\n        this.$socket.connect();\n      }\n      // this.$socket.emit(\"login\", {\"username\": this.form.username}, (result) => {\n      //   console.log(result);\n      // });\n      this.$socket.emitLogin(this.form.username, result => {\n        console.log(result);\n        if (result['code'] == 200) {\n          //console.log(\"get\")\n          //const user = result['data']; // in pycharm backend: the data returned is just the username\n          //console.log(user['username'])\n          const data = result['data'];\n          const user = data['user'];\n          const online_users = data['online_users'];\n          this.$store.commit(\"SET_SESSIONS\", online_users); // should be in \" \"\n          this.$store.commit(\"SET_USER\", user);\n          this.$router.push({\n            'name': \"home\"\n          }); // direct to \"home\"\n        } else {\n          console.log(\"error\");\n          console.log(result['message']);\n          ElMessage.error(result['message']);\n        }\n      });\n    }\n  }\n};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}